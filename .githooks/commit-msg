#!/bin/sh

# Temporary file containing commit message
MSG_FILE=$1
MSG_CONTENT=$(cat "$MSG_FILE")

# Conventional Commits Regex (Standard)
# Format: <type>(<scope>): <subject>
# Examples: "feat: add login", "fix(auth): correct token"
PATTERN="^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([a-z0-9\._-]+\))?: .+$"

if ! echo "$MSG_CONTENT" | grep -qE "$PATTERN"; then
    echo "‚ùå COMMIT ERROR: Message does not comply with Conventional Commits."
    echo "The format must be: type(scope): description"
    echo "Permitted types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
    echo ""
    echo "Valid example:   feat: add user login"
    echo "Your commit message: $MSG_CONTENT"
    exit 1
fi

exit 0